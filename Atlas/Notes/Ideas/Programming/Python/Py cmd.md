---
up:
  - "[[Py Module]]"
related:
  - "[[Py cmd in details]]"
created: 2024-05-15
tags:
---
- This module only have one public class `Cmd`


[cpython/Lib/cmd.py at 3.8 · python/cpython · GitHub](https://github.com/python/cpython/blob/3.8/Lib/cmd.py)


| Topic                                         | Explain                                                                                                                                                                                                                                                            |
| --------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                               | Input lines are parsed into two parts (Command, Arguments)                                                                                                                                                                                                         |
| __Methods__                                   |                                                                                                                                                                                                                                                                    |
| `do_command()`                                | You can make a command at your `cmd` by that                                                                                                                                                                                                                       |
| `do_quit()`                                   | To quit out of the `cmd` with word `quit` but you should add in it `exit` or `return True` or `raise SystemExit`                                                                                                                                                   |
| `do_EOF()`                                    | To quit with interrupt but you should add same things (last)                                                                                                                                                                                                       |
| `do_shell()`                                  | To run other commands (shell)                                                                                                                                                                                                                                      |
| _Note_                                        | You should add `arg` for this methods                                                                                                                                                                                                                              |
|                                               |                                                                                                                                                                                                                                                                    |
| __Help__                                      | - It's a built into `Cmd`<br>- With no arguments, it shows the list of commands available.<br>- If you include a command you want help on, the output is the document for method of command                                                                        |
| `help_command()`                              | To make help more formatted and make a help handler for the command                                                                                                                                                                                                |
|                                               |                                                                                                                                                                                                                                                                    |
| __Auto-Completion__                           | - `Cmd` includes support for command completion based on the names of the commands with processor methods.<br>- The user triggers completion by hitting the tab key.<br>- When multiple completions are possible, pressing tab twice prints a list of the options. |
| `complete_command()`                          | - After we know the command, we can handle the argument completion<br>- This allows you to assemble a list of possible completions using your own criteria (query a database, look at at a file or directory on the filesystem, etc.)                              |
|                                               |                                                                                                                                                                                                                                                                    |
| __Attributes__                                |                                                                                                                                                                                                                                                                    |
| `prompt`                                      | can be set to a string to be printed each time the user is asked for a new command                                                                                                                                                                                 |
| `intro`                                       | the “welcome” message printed at the start of the program                                                                                                                                                                                                          |
| When printing help                            | `doc_header` and `misc_header` and `undoc_header`                                                                                                                                                                                                                  |
|                                               |                                                                                                                                                                                                                                                                    |
| __Class Methods__                             |                                                                                                                                                                                                                                                                    |
| _Overriding_ Base Class Methods               | `Cmd` includes several methods that can be overridden as hooks for taking actions or altering the base class behaviour.                                                                                                                                            |
| `cmdloop()`                                   | - Takes an argument for this value, or you can set it on the class directly<br>- The main processing loop of the interpreter                                                                                                                                       |
| `preloop()`                                   | Before the `cmd` starting                                                                                                                                                                                                                                          |
| `postloop()`                                  | After we end the program                                                                                                                                                                                                                                           |
| `onecmd()`                                    | - `cmdloop` calling it to dispatch the command to its processor<br>- The actual input for it is parsed with `parseline()`                                                                                                                                          |
| `parseline()`                                 | Parse the input for interpreter to use at `onecmd()`                                                                                                                                                                                                               |
| `emptyline()`                                 | - If I entered empty line what should appear.<br>- By default, it will execute last command<br>- To make it empty you should give it `pass`                                                                                                                        |
| `precmd()`                                    | If the line contains a command, first `precmd()` is called then the processor is looked up and invoked.                                                                                                                                                            |
| `default()`                                   | If none is found, `default()` is called instead.                                                                                                                                                                                                                   |
| `postcmd()`                                   | After the command                                                                                                                                                                                                                                                  |
|                                               |                                                                                                                                                                                                                                                                    |
| __Special Command Prefixes__                  |                                                                                                                                                                                                                                                                    |
| `A question mark (?)`                         | Equivalent to the built-in `help` command, and can be used in the same way.                                                                                                                                                                                        |
| `An exclamation point (!)`                    | Maps to `do_shell()`                                                                                                                                                                                                                                               |
|                                               |                                                                                                                                                                                                                                                                    |
| We need to use it at __non-interactive mode__ | `echo help \| python cmd_do_help.py`<br>- We should have `EOF` for it                                                                                                                                                                                              |
