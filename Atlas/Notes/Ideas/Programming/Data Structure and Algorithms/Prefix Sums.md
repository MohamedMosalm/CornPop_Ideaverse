---
up:
  - "[[Data Structure and Algorithms MOC]]"
related: 
created: 2024-07-24
---

- معنى Prefix: بنبدأ من البداية وبتاخد اللي جنبها (أي جزء من الـ [[Array]] بشرط إنه يكون من البداية)
- الخطوات
	- إنك بتاخد أول عنصر فدا هيبقا أول Prefix عندي 
	- تاخد العنصر اللي بعده وتجمعه **على الـ Prefix اللي فات** فكدا يبقا عندي Prefix تاني وهكذا
	- ممكن يبقا جمع أو ضرب عادي

![[Pasted image 20240724150046.png]]
- عندنا عكسها وهي الـ postfix معناها إني ببدأ من الآخر للأول (شرط يكون الآخر معانا)
- الإتنين دول بيحلولي مشكلة التكرار اللي ملهاش لازمة والـ Time الزيادة اللي بتاخده

## Problem
أكتر مشكلة مشهورة فالموضوع دا:
- عندك Array of values وعايزين نجيب مجموع subarray فيها 
- `subarray(5: start, 7: end)

#### Brute force
- الحل سهل جدًا إنك هتعمل variable تسميه Total مثلًا وتمشي على كل العناصر واحد واحد وتجمعها
- الـTime بتاعها هيبقا **O(n)** ولحد هنا مفيش مشكلة
طيب لو قولتلك أنا عايز أجيب مجموع كل الـ Subarrays اللي في الـ array بتاعنا (هنا المشكلة تظهر)
- لو مشيت بنفس الحل دا هيبقا الـ Time عبارة عن **O(n^2)**

#### Prefix Sums
- الحل بالطريقة دي هيقلل الـTime جدًا فهيخلي كل عملية جمع عبارة عن **O(1)** بدل O(n)
الخطوات: `subarray(1: start, 3 end)`
- هتعمل Prefix sum عادي زي اللي فوق دا 
  (بتجهز الشغل الأول قبل الحل وبنسميها Pre computing work)
- بعدين بكل بساطة هتاخد المجموع للعنصر الأخير
  وليكن العنصر 3 (Index) والمجموع عنده بـ 1
- هتطرحه من المجموع اللي قبل الـ Subarray بتاعتي (اللي قبل البداية) ودا بطبيعة الحال هو مجموعها
  وليكن العنصر 1 وقبله العنصر 0 والمجموع عليه بـ 2 فطرحهم هيبقا -1
- لو جينا بالطريقة العادية جمعنا -3 + 3 -1 = -1 اللي هو نفس الحل
- بس زي ما قولنا الـ Time أقل بكتير

![[Pasted image 20240724151346.png]]
#### Postfix Sum
- نفس الفكرة في الـ Postfix لأنهم يعتبروا وجهان لعملة واحدة

![[Pasted image 20240724151719.png]]
- هنا مثلًا الرقم اللي هيبقا فوق الـ -3 دا مجموع كل اللي قبله اللي هو الـ 4 و -3 = 1
- الأرقام اللي فوق غلط 
- سؤال: حلها بطريقة الـ Postfix

## Code
### Python
```python
class PrefixSum:

    def __init__(self, nums):
        self.prefix = []
        total = 0
        for n in nums:
            total += n
            self.prefix.append(total)
        
    def rangeSum(self, left, right):
        preRight = self.prefix[right]
        preLeft = self.prefix[left - 1] if left > 0 else 0
        return (preRight - preLeft)
```